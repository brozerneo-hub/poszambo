[debug] [2025-08-18T05:47:56.992Z] ----------------------------------------------------------------------
[debug] [2025-08-18T05:47:57.005Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\szamb\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js emulators:start
[debug] [2025-08-18T05:47:57.007Z] CLI Version:   14.12.0
[debug] [2025-08-18T05:47:57.007Z] Platform:      win32
[debug] [2025-08-18T05:47:57.008Z] Node Version:  v22.17.0
[debug] [2025-08-18T05:47:57.009Z] Time:          Mon Aug 18 2025 07:47:57 GMT+0200 (heure d’été d’Europe centrale)
[debug] [2025-08-18T05:47:57.009Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-08-18T05:47:58.059Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-08-18T05:47:58.063Z] > authorizing via signed-in user (brozerneo@gmail.com)
[debug] [2025-08-18T05:47:59.094Z] java version "21.0.8" 2025-07-15 LTS
Java(TM) SE Runtime Environment (build 21.0.8+12-LTS-250)
Java HotSpot(TM) 64-Bit Server VM (build 21.0.8+12-LTS-250, mixed mode, sharing)

[debug] [2025-08-18T05:47:59.099Z] Parsed Java major version: 21
[info] i  emulators: Starting emulators: auth, functions, firestore, hosting, extensions {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: auth, functions, firestore, hosting, extensions"}}
[debug] [2025-08-18T05:47:59.105Z] Checked if tokens are valid: false, expires at: 1755416136845
[debug] [2025-08-18T05:47:59.106Z] Checked if tokens are valid: false, expires at: 1755416136845
[debug] [2025-08-18T05:47:59.106Z] > refreshing access token with scopes: []
[debug] [2025-08-18T05:47:59.111Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2025-08-18T05:47:59.111Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2025-08-18T05:47:59.392Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2025-08-18T05:47:59.393Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2025-08-18T05:47:59.430Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/pos-system-project/services/cloudresourcemanager.googleapis.com [none]
[debug] [2025-08-18T05:47:59.431Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/pos-system-project/services/cloudresourcemanager.googleapis.com x-goog-quota-user=projects/pos-system-project
[debug] [2025-08-18T05:48:00.896Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/pos-system-project/services/cloudresourcemanager.googleapis.com 403
[debug] [2025-08-18T05:48:00.896Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/pos-system-project/services/cloudresourcemanager.googleapis.com [omitted]
[debug] [2025-08-18T05:48:00.897Z] Unable to check that https://cloudresourcemanager.googleapis.com is enabled on pos-system-project. Calls to it will fail if it is not enabled
[debug] [2025-08-18T05:48:00.898Z] Checked if tokens are valid: true, expires at: 1755499678393
[debug] [2025-08-18T05:48:00.898Z] Checked if tokens are valid: true, expires at: 1755499678393
[debug] [2025-08-18T05:48:00.898Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/pos-system-project [none]
[debug] [2025-08-18T05:48:01.899Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/pos-system-project 403
[debug] [2025-08-18T05:48:01.899Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/pos-system-project {"error":{"code":403,"message":"The caller does not have permission","status":"PERMISSION_DENIED"}}
[error] !!  extensions: Unable to look up project number for pos-system-project.
 If this is a real project, ensure that you are logged in and have access to it.
 If this is a fake project, please use a project ID starting with 'demo-' to skip production calls.
 Continuing with a fake project number - secrets and other features that require production access may behave unexpectedly. {"metadata":{"emulator":{"name":"extensions"},"message":"Unable to look up project number for pos-system-project.\n If this is a real project, ensure that you are logged in and have access to it.\n If this is a fake project, please use a project ID starting with 'demo-' to skip production calls.\n Continuing with a fake project number - secrets and other features that require production access may behave unexpectedly."}}
[debug] [2025-08-18T05:48:01.958Z] [logging] Logging Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-08-18T05:48:01.958Z] [auth] Authentication Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-08-18T05:48:01.958Z] [firestore] Firestore Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-08-18T05:48:01.959Z] [firestore.websocket] websocket server for firestore only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-08-18T05:48:01.960Z] [hosting] Hosting Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-08-18T05:48:01.960Z] assigned listening specs for emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4100},{"address":"::1","family":"IPv6","port":4100}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"auth":[{"address":"127.0.0.1","family":"IPv4","port":9199}],"firestore":[{"address":"127.0.0.1","family":"IPv4","port":8180}],"firestore.websocket":[{"address":"127.0.0.1","family":"IPv4","port":9150}],"hosting":[{"address":"127.0.0.1","family":"IPv4","port":5100}]},"metadata":{"message":"assigned listening specs for emulators"}}
[debug] [2025-08-18T05:48:01.974Z] [hub] writing locator at C:\Users\szamb\AppData\Local\Temp\hub-pos-system-project.json
[debug] [2025-08-18T05:48:02.000Z] [Extensions] Started Extensions emulator, this is a noop.
[debug] [2025-08-18T05:48:02.018Z] [functions] Functions Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-08-18T05:48:02.019Z] [eventarc] Eventarc Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-08-18T05:48:02.019Z] [tasks] Cloud Tasks Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-08-18T05:48:02.019Z] late-assigned ports for functions and eventarc emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4100},{"address":"::1","family":"IPv6","port":4100}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"auth":[{"address":"127.0.0.1","family":"IPv4","port":9199}],"firestore":[{"address":"127.0.0.1","family":"IPv4","port":8180}],"firestore.websocket":[{"address":"127.0.0.1","family":"IPv4","port":9150}],"hosting":[{"address":"127.0.0.1","family":"IPv4","port":5100}],"functions":[{"address":"127.0.0.1","family":"IPv4","port":5101}],"eventarc":[{"address":"127.0.0.1","family":"IPv4","port":9299}],"tasks":[{"address":"127.0.0.1","family":"IPv4","port":9499}]},"metadata":{"message":"late-assigned ports for functions and eventarc emulators"}}
[warn] !  functions: The following emulators are not running, calls to these services from the Functions emulator will affect production: apphosting, database, pubsub, storage, dataconnect {"metadata":{"emulator":{"name":"functions"},"message":"The following emulators are not running, calls to these services from the Functions emulator will affect production: \u001b[1mapphosting, database, pubsub, storage, dataconnect\u001b[22m"}}
[debug] [2025-08-18T05:48:02.133Z] defaultcredentials: writing to file C:\Users\szamb\AppData\Roaming\firebase\brozerneo_gmail_com_application_default_credentials.json
[debug] [2025-08-18T05:48:02.138Z] Setting GAC to C:\Users\szamb\AppData\Roaming\firebase\brozerneo_gmail_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to C:\\Users\\szamb\\AppData\\Roaming\\firebase\\brozerneo_gmail_com_application_default_credentials.json"}}
[debug] [2025-08-18T05:48:02.140Z] Checked if tokens are valid: true, expires at: 1755499678393
[debug] [2025-08-18T05:48:02.141Z] Checked if tokens are valid: true, expires at: 1755499678393
[debug] [2025-08-18T05:48:02.141Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/pos-system-project/adminSdkConfig [none]
[debug] [2025-08-18T05:48:02.600Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/pos-system-project/adminSdkConfig 403
[debug] [2025-08-18T05:48:02.601Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/pos-system-project/adminSdkConfig {"error":{"code":403,"message":"The caller does not have permission","status":"PERMISSION_DENIED"}}
[debug] [2025-08-18T05:48:02.601Z] Failed to get Admin SDK config for pos-system-project, falling back to cache Failed to get Admin SDK for Firebase project pos-system-project. Please make sure the project exists and your account has permission to access it. {"name":"FirebaseError","children":[],"exit":2,"message":"Failed to get Admin SDK for Firebase project pos-system-project. Please make sure the project exists and your account has permission to access it.","original":{"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":403,"message":"The caller does not have permission","status":"PERMISSION_DENIED"}},"response":{"statusCode":403}},"exit":1,"message":"Request to https://firebase.googleapis.com/v1beta1/projects/pos-system-project/adminSdkConfig had HTTP Error: 403, The caller does not have permission","status":403},"status":500}
[warn] !  functions: Unable to fetch project Admin SDK configuration, Admin SDK behavior in Cloud Functions emulator may be incorrect. {"metadata":{"emulator":{"name":"functions"},"message":"Unable to fetch project Admin SDK configuration, Admin SDK behavior in Cloud Functions emulator may be incorrect."}}
[warn] !  firestore: Cloud Firestore Emulator does not support multiple databases yet. {"metadata":{"emulator":{"name":"firestore"},"message":"Cloud Firestore Emulator does not support multiple databases yet."}}
[warn] !  firestore: Did not find a Cloud Firestore rules file specified in a firebase.json config file. {"metadata":{"emulator":{"name":"firestore"},"message":"Did not find a Cloud Firestore rules file specified in a firebase.json config file."}}
[warn] !  firestore: The emulator will default to allowing all reads and writes. Learn more about this option: https://firebase.google.com/docs/emulator-suite/install_and_configure#security_rules_configuration. {"metadata":{"emulator":{"name":"firestore"},"message":"The emulator will default to allowing all reads and writes. Learn more about this option: https://firebase.google.com/docs/emulator-suite/install_and_configure#security_rules_configuration."}}
[debug] [2025-08-18T05:48:02.644Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2025-08-18T05:48:02.645Z] Ignoring unsupported arg: single_project_mode_error {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: single_project_mode_error"}}
[debug] [2025-08-18T05:48:02.645Z] Starting Firestore Emulator with command {"binary":"java","args":["-Dgoogle.cloud_firestore.debug_log_level=FINE","-Duser.language=en","-jar","C:\\Users\\szamb\\.cache\\firebase\\emulators\\cloud-firestore-emulator-v1.19.8.jar","--host","127.0.0.1","--port",8180,"--websocket_port",9150,"--project_id","pos-system-project","--single_project_mode",true,"--functions_emulator","127.0.0.1:5101"],"optionalArgs":["port","webchannel_port","host","rules","websocket_port","functions_emulator","seed_from_export","project_id","single_project_mode"],"joinArgs":false,"shell":false,"port":8180} {"metadata":{"emulator":{"name":"firestore"},"message":"Starting Firestore Emulator with command {\"binary\":\"java\",\"args\":[\"-Dgoogle.cloud_firestore.debug_log_level=FINE\",\"-Duser.language=en\",\"-jar\",\"C:\\\\Users\\\\szamb\\\\.cache\\\\firebase\\\\emulators\\\\cloud-firestore-emulator-v1.19.8.jar\",\"--host\",\"127.0.0.1\",\"--port\",8180,\"--websocket_port\",9150,\"--project_id\",\"pos-system-project\",\"--single_project_mode\",true,\"--functions_emulator\",\"127.0.0.1:5101\"],\"optionalArgs\":[\"port\",\"webchannel_port\",\"host\",\"rules\",\"websocket_port\",\"functions_emulator\",\"seed_from_export\",\"project_id\",\"single_project_mode\"],\"joinArgs\":false,\"shell\":false,\"port\":8180}"}}
[info] i  firestore: Firestore Emulator logging to firestore-debug.log {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator logging to \u001b[1mfirestore-debug.log\u001b[22m"}}
[info] +  firestore: Firestore Emulator UI websocket is running on 9150. {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator UI websocket is running on 9150."}}
[debug] [2025-08-18T05:48:35.002Z] Checked if tokens are valid: true, expires at: 1755499678393
[debug] [2025-08-18T05:48:35.002Z] Checked if tokens are valid: true, expires at: 1755499678393
[debug] [2025-08-18T05:48:35.003Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/pos-system-project/sites 
[debug] [2025-08-18T05:48:36.078Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/pos-system-project/sites 403
[debug] [2025-08-18T05:48:36.079Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/pos-system-project/sites {"error":{"code":403,"message":"Permission 'firebasehosting.sites.get' denied on resource 'projects/pos-system-project' (or it may not exist)","status":"PERMISSION_DENIED"}}
[debug] [2025-08-18T05:48:36.079Z] Failed to list hosting sites
[debug] Request to https://firebasehosting.googleapis.com/v1beta1/projects/pos-system-project/sites had HTTP Error: 403, Permission 'firebasehosting.sites.get' denied on resource 'projects/pos-system-project' (or it may not exist)
[debug] [2025-08-18T05:48:36.080Z] Checked if tokens are valid: true, expires at: 1755499678393
[debug] [2025-08-18T05:48:36.080Z] Checked if tokens are valid: true, expires at: 1755499678393
[debug] [2025-08-18T05:48:36.080Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/pos-system-project/webApps/-/config [none]
[debug] [2025-08-18T05:48:36.512Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/pos-system-project/webApps/-/config 403
[debug] [2025-08-18T05:48:36.512Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/pos-system-project/webApps/-/config {"error":{"code":403,"message":"The caller does not have permission","status":"PERMISSION_DENIED"}}
[debug] [2025-08-18T05:48:36.513Z] fetchWebSetup error: FirebaseError: Request to https://firebase.googleapis.com/v1beta1/projects/pos-system-project/webApps/-/config had HTTP Error: 403, The caller does not have permission
[warn] !  hosting: Authentication error when trying to fetch your current web app configuration, have you run firebase login? 
[warn] !  hosting: Could not fetch web app configuration and there is no cached configuration on this machine. Check your internet connection and make sure you are authenticated. To continue, you must call firebase.initializeApp({...}) in your code before using Firebase. 
[debug] [2025-08-18T05:48:36.525Z] Checked if tokens are valid: true, expires at: 1755499678393
[debug] [2025-08-18T05:48:36.526Z] Checked if tokens are valid: true, expires at: 1755499678393
[debug] [2025-08-18T05:48:36.527Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/pos-system-project [none]
[debug] [2025-08-18T05:48:36.837Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/pos-system-project 403
[debug] [2025-08-18T05:48:36.837Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/pos-system-project {"error":{"code":403,"message":"The caller does not have permission","status":"PERMISSION_DENIED"}}
[debug] [2025-08-18T05:48:36.838Z] Request to https://firebase.googleapis.com/v1beta1/projects/pos-system-project had HTTP Error: 403, The caller does not have permission
[info] i  hosting[pos-system-project]: Serving hosting files from: build {"metadata":{"emulator":{"name":"hosting"},"message":"Serving hosting files from: \u001b[1mbuild\u001b[22m"}}
[info] +  hosting[pos-system-project]: Local server: http://127.0.0.1:5100 {"metadata":{"emulator":{"name":"hosting"},"message":"Local server: \u001b[4m\u001b[1mhttp://127.0.0.1:5100\u001b[22m\u001b[24m"}}
[debug] [2025-08-18T05:48:36.956Z] [Extensions] Connecting Extensions emulator, this is a noop.
[info] i  functions: Watching "C:\Users\szamb\pos-system\frontend\backend\functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"C:\\Users\\szamb\\pos-system\\frontend\\backend\\functions\" for Cloud Functions..."}}
[debug] [2025-08-18T05:48:36.969Z] Validating nodejs source
[debug] [2025-08-18T05:48:41.810Z] > [functions] package.json contents: {
  "name": "pos-backend",
  "version": "1.0.0",
  "main": "lib/index.js",
  "scripts": {
    "build": "tsc",
    "serve": "firebase emulators:start --only functions,firestore",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log",
    "create-admin": "cross-env GCLOUD_PROJECT=poszambo FIRESTORE_EMULATOR_HOST=127.0.0.1:8180 ts-node src/scripts/createAdmin.ts",
    "read-admin": "cross-env GCLOUD_PROJECT=poszambo FIRESTORE_EMULATOR_HOST=127.0.0.1:8180 ts-node src/scripts/readAdmin.ts"
  },
  "dependencies": {
    "bcrypt": "^5.1.1",
    "cors": "^2.8.5",
    "express": "^4.19.2",
    "firebase-admin": "^12.1.0",
    "firebase-functions": "^6.4.0",
    "joi": "^17.13.1",
    "jsonwebtoken": "^9.0.2"
  },
  "devDependencies": {
    "@types/bcrypt": "^5.0.2",
    "@types/cors": "^2.8.17",
    "@types/express": "^4.17.21",
    "@types/jsonwebtoken": "^9.0.6",
    "cross-env": "^10.0.0",
    "ts-node": "^10.9.2",
    "typescript": "^5.4.5"
  }
}
[debug] [2025-08-18T05:48:41.812Z] Building nodejs source
[debug] [2025-08-18T05:48:41.812Z] Failed to find version of module node: reached end of search path C:\Users\szamb\pos-system\frontend\backend\functions\node_modules
[info] +  functions: Using node@22 from host. 
[debug] [2025-08-18T05:48:41.818Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-18T05:48:41.838Z] Found firebase-functions binary at 'C:\Users\szamb\pos-system\frontend\backend\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8455

[debug] [2025-08-18T05:48:49.462Z] Got response from /__/functions.yaml {"endpoints":{"api":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[debug] [2025-08-18T05:48:53.589Z] defaultcredentials: writing to file C:\Users\szamb\AppData\Roaming\firebase\brozerneo_gmail_com_application_default_credentials.json
[debug] [2025-08-18T05:48:53.591Z] Setting GAC to C:\Users\szamb\AppData\Roaming\firebase\brozerneo_gmail_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to C:\\Users\\szamb\\AppData\\Roaming\\firebase\\brozerneo_gmail_com_application_default_credentials.json"}}
[info] +  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[info] +  functions[us-central1-api]: http function initialized (http://127.0.0.1:5101/pos-system-project/us-central1/api). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5101/pos-system-project/us-central1/api)."}}
[debug] [2025-08-18T05:48:53.611Z] Could not find VSCode notification endpoint: FetchError: request to http://localhost:40001/vscode/notify failed, reason: . If you are not running the Firebase Data Connect VSCode extension, this is expected and not an issue.
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4100/               │
└─────────────────────────────────────────────────────────────┘

┌────────────────┬────────────────┬──────────────────────────────────┐
│ Emulator       │ Host:Port      │ View in Emulator UI              │
├────────────────┼────────────────┼──────────────────────────────────┤
│ Authentication │ 127.0.0.1:9199 │ http://127.0.0.1:4100/auth       │
├────────────────┼────────────────┼──────────────────────────────────┤
│ Functions      │ 127.0.0.1:5101 │ http://127.0.0.1:4100/functions  │
├────────────────┼────────────────┼──────────────────────────────────┤
│ Firestore      │ 127.0.0.1:8180 │ http://127.0.0.1:4100/firestore  │
├────────────────┼────────────────┼──────────────────────────────────┤
│ Hosting        │ 127.0.0.1:5100 │ n/a                              │
├────────────────┼────────────────┼──────────────────────────────────┤
│ Extensions     │ 127.0.0.1:5101 │ http://127.0.0.1:4100/extensions │
└────────────────┴────────────────┴──────────────────────────────────┘
  Emulator Hub host: 127.0.0.1 port: 4400
  Other reserved ports: 4500, 9150
┌─────────────────────────┬───────────────┬─────────────────────┐
│ Extension Instance Name │ Extension Ref │ View in Emulator UI │
└─────────────────────────┴───────────────┴─────────────────────┘
Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
